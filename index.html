<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<meta name="author" content="Spring Cloud Brewery on OpenShift: Setup Guide">
<title>Green Cloud Demo</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Green Cloud Demo</h1>
<div class="details">
<span id="author" class="author">Spring Cloud Brewery on OpenShift: Setup Guide</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#overview">1. Overview</a></li>
<li><a href="#demo-overview">2. Demo Overview</a>
<ul class="sectlevel2">
<li><a href="#short-history-of-microservices">2.1. Short History of Microservices</a></li>
<li><a href="#app-overview">2.2. App Overview</a></li>
<li><a href="#default-pre-req">2.3. Pre-Requisite</a></li>
<li><a href="#docker-setup">2.4. Docker Setup</a></li>
<li><a href="#accessing-the-applications">2.5. Accessing the Applications</a></li>
</ul>
</li>
<li><a href="#iteration-1">3. Iteration I</a>
<ul class="sectlevel2">
<li><a href="#itr1-application-setup">3.1. Setup</a></li>
<li><a href="#itr1-deployable-apps">3.2. Deploy Applications</a></li>
</ul>
</li>
<li><a href="#iteration-2">4. Iteration II</a>
<ul class="sectlevel2">
<li><a href="#itr2-application-setup">4.1. Setup</a></li>
<li><a href="#itr2-pre-req">4.2. Pre-Requisite</a></li>
<li><a href="#itr2-deployable-apps">4.3. Deploy Applications</a></li>
<li><a href="#itr2-acceptance-testing">4.4. Acceptance Testing</a></li>
<li><a href="#itr2-deprecated-modules">4.5. Deprecated Modules</a></li>
</ul>
</li>
<li><a href="#iteration-3">5. Iteration III</a>
<ul class="sectlevel2">
<li><a href="#itr3-application-setup">5.1. Setup</a></li>
<li><a href="#itr3-pre-req">5.2. Pre-Requisite</a></li>
<li><a href="#itr3-deployable-apps">5.3. Deploy Applications</a></li>
<li><a href="#itr3-open-issues">5.4. Open Issues</a></li>
<li><a href="#itr3-deprecated-modules">5.5. Deprecated Modules</a></li>
</ul>
</li>
<li><a href="#resources">6. Resources</a>
<ul class="sectlevel2">
<li><a href="#documentation">6.1. Documentation</a></li>
<li><a href="#res-tools">6.2. Tools</a></li>
<li><a href="#res-blogs">6.3. Blogs</a></li>
<li><a href="#res-demos">6.4. Demos</a></li>
<li><a href="#res-videos">6.5. Videos</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>&#169; 2017-present Red Hat Developers.</p>
</div>
<!-- toc disabled -->
<div class="videoblock">
<div class="title">Debug/Deploy Spring Boot On OpenShift</div>
<div class="content">
<iframe width="640" height="480" src="https://www.youtube.com/embed/4oOfSdEIyxU?rel=0&amp;theme=dark" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview">1. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Green Cloud Demo</strong> is your first step on how to migrate and optimize an existing Spring Boot application  to
<a href="https://www.openshift.com">OpenShift</a>.  The migration guides you with the process of how to migrate Spring Boot workload form other platform
to <a href="https://www.openshift.com">OpenShift</a>, i.e. the build process, the ideal platform (<a href="https://www.openshift.com">OpenShift</a>), optimizing etc.,</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="demo-overview">2. Demo Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="short-history-of-microservices">2.1. Short History of Microservices</h3>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/History_Of_Microservices.png" alt="History Of Microservices">
</div>
<div class="title">Figure 1. Short History of Microservices</div>
</div>
<div class="paragraph">
<p>Most of the <a href="https://netflix.github.io/">Netflix OSS</a> components listed above are pretty old and optimized more for AWS, they are prone to some common DevOps
pain-points for organizations that are starting to adopt DevOps. The migration that will be done as part of this demo will help in alleviating those possible
DevOps pain-points and provide the organizations a direction on <strong>How to migrate my Spring Boot Application to OpenShift</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="app-overview">2.2. App Overview</h3>
<div class="paragraph">
<p>In this demo, the <a href="https://github.com/kameshsampath/brewery">Spring Cloud Samples - Brewery</a> will be migrated
and optimized for OpenShift, during the process of migration the original <a href="https://github.com/spring-cloud-samples/brewery">Spring Cloud Samples - Brewery</a>
will be modified to make it deployable on to <a href="https://kubernetes.io">Kubernetes</a> or <a href="https://www.openshift.com">Openshift</a>.</p>
</div>
<div class="paragraph">
<p>The application will be migrated based on these iterations,</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> <a href="#iteration-1">Iteration I</a> - As-is deployment of the <a href="https://github.com/spring-cloud-samples/brewery">Spring Cloud Samples - Brewery</a>
with no code change.  The Application build process will be modified to enable easier deployment of application on Openshift</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <a href="#iteration-2">Iteration II</a> - Will use native OpenShift/Kubernetes features such as service discovery, loadbalancing &amp; externalization of the config</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <a href="#iteration-3">Iteration III</a> - Optimizing stacks on OpenShift, like Apache Artemis instead of RabbitMQ, using OpenTracing and Jaeger</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="default-pre-req">2.3. Pre-Requisite</h3>
<div class="paragraph">
<p>You have a OpenShift cluster running locally using <a href="https://docs.openshift.org/latest/minishift/getting-started/index.html"><strong>minishift</strong></a>
or <a href="https://developers.redhat.com/products/cdk/overview/Op"><strong>CDK</strong></a>, or
have access to <a href="https://www.openshift.com/container-platform/index.html"><strong>OpenShift Container Platform</strong></a></p>
</div>
<div class="paragraph">
<p>Check the <a href="#res-tools">Tools</a> section for more details</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>At least 7Gb of RAM is required to run the Brewery application, atleast for <a href="#iteration-1">Iteration I</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="docker-setup">2.4. Docker Setup</h3>
<div class="paragraph">
<p>Before doing any deployment, its recommended to do <code>eval $(minishift docker-env)</code> from your current shell, to set up the DOCKER environment variables, that
will be needed by the fabric8 maven plugin to deploy application on OpenShift</p>
</div>
</div>
<div class="sect2">
<h3 id="accessing-the-applications">2.5. Accessing the Applications</h3>
<div class="paragraph">
<p>You can view the application urls from OpenShift Web Console.  A successful deployment  will have all the applications running with single pod. The following screenshots
shows how the <a href="#deploy-eureka">Eureka</a> will look like when all the clients registers with it</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/OpenShift_Web_Console.png" alt="OpenShift WebConsole">
</div>
<div class="title">Figure 2. Brewery Services</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Eureka_OpenShift.png" alt="Netflix Eureka Registry">
</div>
<div class="title">Figure 3. Eureka on OpenShift</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Brewer_App.png" alt="Brewer Application Home">
</div>
<div class="title">Figure 4. Brewer App</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="iteration-1">3. Iteration I</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Iteration-1 is supposed to be the as-is deployment of the <em>Brewery</em> application on to <a href="https://kubernetes.io">Kubernetes</a>
or <a href="https://www.openshift.com">Openshift</a>.  This will have all the components from the original <a href="https://github.com/spring-cloud-samples/brewery" class="bare">https://github.com/spring-cloud-samples/brewery</a>
with modifications required :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Fabric8 Maven Plugin to generate the Kubernetes/OpenShift resources needed to deploy the applications on the platform</p>
</li>
<li>
<p>Design OpenShift templates to deploy RabbitMQ and the different servers such as Eureka, Config-Server, Zipkin, &#8230;&#8203; (to be discussed)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>to have it deployed on to <a href="https://kubernetes.io">Kubernetes</a> or <a href="https://www.openshift.com">Openshift</a></p>
</div>
<div class="sect2">
<h3 id="itr1-application-setup">3.1. Setup</h3>
<div class="sect3">
<h4 id="itr1-clone-source">3.1.1. Clone</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">git clone -b iteration-1 https://github.com/redhat-developer-demos/brewery.git</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Through out this document we will call the directory where the project was cloned as <em>$PROJECT_HOME</em></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="itr1-deployable-apps">3.2. Deploy Applications</h3>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Application List</caption>
<colgroup>
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 62.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"></th>
<th class="tableblock halign-left valign-top">Application</th>
<th class="tableblock halign-left valign-top">Folder</th>
<th class="tableblock halign-left valign-top">Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#rabbitmq">RabbitMQ</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/extras/rabbitmq</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Broker - <a href="https://www.rabbitmq.com/" class="bare">https://www.rabbitmq.com/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">common</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/common</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common shared library</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#eureka">Eureka</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/eureka</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Registry - <a href="https://github.com/Netflix/eureka/wiki/Eureka-at-a-glance" class="bare">https://github.com/Netflix/eureka/wiki/Eureka-at-a-glance</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#config-server">Config Server</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/config-server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Centralized Configuration Server - <a href="https://cloud.spring.io/spring-cloud-config/spring-cloud-config.html" class="bare">https://cloud.spring.io/spring-cloud-config/spring-cloud-config.html</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#zipkin-server">Zipkin Server</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/zipkin-server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://zipkin.io/">Distributed Tracing system</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#zuul">Zuul</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/zuul</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/Netflix/zuul/wiki">Java based Proxy</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ingredients">Ingredients</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/ingredients</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#reporting">Reporting</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/reporting</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#brewing">Brewing</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/brewing</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#presenting">Presenting</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/presenting</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="itr1-build-app">3.2.1. Building</h4>
<div class="paragraph">
<p>Brewery application uses gradle for build, we will leverage on the same to get the application artifacts ready. To build the applicaiton
run the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./gradlew -DWHAT_TO_TEST=&quot;SLEUTH_STREAM&quot; clean build <i class="conum" data-value="1"></i><b>(1)</b>
./mvnw -N install <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We will be using <a href="https://cloud.spring.io/spring-cloud-sleuth/">Spring Cloud Sleuth</a> for sending trace information to <a href="https://github.com/openzipkin/zipkin">Zipkin</a></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This will install the brewery parent pom in local maven repository</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="itr1-deploy-to-openshift">3.2.2. Deploying to OpenShift</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As part of this lift and shift i.e to make existing application to work <strong>as-is</strong>, there is certain order of application deployment might be required.
The order below is not hard rule but the best known working order during the migration effort.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="rabbitmq">RabbitMQ</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/extras/rabbitmq</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw -Dfabric8.mode=kubernetes clean fabric8:deploy</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will take some time to get it running as the deployment needs to download the <code>rabbitmq</code> docker image</p>
</div>
</div>
<div class="sect4">
<h5 id="config-server">Config Server</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/config-server</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw clean fabric8:deploy</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Since this is the first Java application to be deployed,  it may take some time to download the necessary images from docker hub.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="eureka">Eureka</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/eureka</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw clean fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="zipkin-server">Zipkin Server</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/zipkin-server</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw clean fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="zuul">Zuul</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/zuul</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw clean fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ingredients">Ingredients</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/ingredients</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw clean fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="reporting">Reporting</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/reporting</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw clean fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="brewing">Brewing</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/brewing</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw clean fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="presenting">Presenting</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/presenting</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw clean fabric8:deploy</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="iteration-2">4. Iteration II</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Iteration II will <a href="#itr2-deprecated-modules">deprecate</a> few of the <a href="https://netflix.github.io/">NetFlix OSS</a> components that are superflous
inside <a href="https://kubernetes.io">Kubernetes</a> or <a href="https://www.openshift.com">Openshift</a>. The following sections shows how to get
the Iteration II deployed on to <a href="https://kubernetes.io">Kubernetes</a> or <a href="https://www.openshift.com">Openshift</a>. This iteration
uses the <a href="https://github.com/spring-cloud-incubator/spring-cloud-kubernetes">Spring Cloud Kubernetes</a> -
the <a href="http://projects.spring.io/spring-cloud/">Spring Cloud</a> based discovery client for Kubernetes</p>
</div>
<div class="sect2">
<h3 id="itr2-application-setup">4.1. Setup</h3>
<div class="sect3">
<h4 id="itr2-clone-source">4.1.1. Clone</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">git clone -b iteration-2 https://github.com/redhat-developer-demos/brewery.git</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Through out this document we will call the directory where the project was cloned as <em>$PROJECT_HOME</em></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="itr2-pre-req">4.2. Pre-Requisite</h3>
<div class="sect3">
<h4 id="itr2-pre-req-general">4.2.1. General</h4>
<div class="paragraph">
<p>The spring-cloud-kubernetes library used in the project requires the <code>default</code> service account to have view permissions, to enable that we execute the following command,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">oc policy add-role-to-user view -z default -n $(oc project -q)</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Service Account <code>default</code> does not have any permission, in order to allow <code>default</code> SA to lookup the ConfigMaps within the namespace, it need to be added with <code>view</code>
role</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="itr2-pre-req-rabbitmq">4.2.2. RabbitMQ</h4>
<div class="paragraph">
<p>The <a href="https://hub.docker.com/_/rabbitmq/">RabbimtMQ</a> container image when run is run using <code>root</code> user (UID <code>0</code>).  The OpenShift by default does not allow container
images to be run with UID <code>0</code>. In order to allow that we need to define polices and attach to Kubernetes Service Account, to have better clarity and control
we create a separate service account called <strong>brewery</strong> and add the required <a href="https://docs.openshift.org/latest/admin_guide/manage_scc.html">Security Context Constraints(SCC)</a>
to allow running the container as UID <code>0</code> user.  The following commands adds the required SCC to the service account <strong>brewery</strong>,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">oc adm policy add-scc-to-user privileged -z brewery <i class="conum" data-value="1"></i><b>(1)</b>

oc adm policy add-scc-to-user anyuid -z brewery  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>brewery</strong> service is created when RabbitMQ is deployed</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="itr2-deployable-apps">4.3. Deploy Applications</h3>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Application List</caption>
<colgroup>
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 62.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"></th>
<th class="tableblock halign-left valign-top">Application</th>
<th class="tableblock halign-left valign-top">Folder</th>
<th class="tableblock halign-left valign-top">Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#rabbitmq">RabbitMQ</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/extras/rabbitmq</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Broker - <a href="https://www.rabbitmq.com/" class="bare">https://www.rabbitmq.com/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">common</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/common</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common shared library</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">common-zipkin-stream</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/ommon-zipkin-stream</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common shared library for the projects that uses the Sleuth Zipkin Stream for tracing</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="red"><strong>X</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="red">eureka</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="red"><strong>$PROJECT_HOME</strong>/eureka</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application will use <a href="https://kubernetes.io/docs/concepts/services-networking/service/">Kubernetes Services</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="red"><strong>X</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="red">config-server</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="red"><strong>$PROJECT_HOME</strong>/config-server</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application will use <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configmap/">Kubernetes ConfigMaps</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#zipkin-server">Zipkin Server</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/zipkin-server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://zipkin.io/">Distributed Tracing system</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#zuul">Zuul</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/zuul</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/Netflix/zuul/wiki">Java based Proxy</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ingredients">Ingredients</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/ingredients</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#reporting">Reporting</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/reporting</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#brewing">Brewing</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/brewing</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#presenting">Presenting</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/presenting</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="itr2-build-app">4.3.1. Building</h4>
<div class="paragraph">
<p>The Iteration II of the brewery application has migrated all the projects to <a href="http://maven.apache.org/">Apache Maven</a> based build.</p>
</div>
<div class="paragraph">
<p>To build the application run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw -N install <i class="conum" data-value="1"></i><b>(1)</b>
./mvnw clean install <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This will install the brewery parent pom in local maven repository</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This will build the applications, if the minishift or OpenShift cluster is running, this will trigger <code>s2i</code> builds
of the respective application as well</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="itr2-deploy-to-openshift">4.3.2. Deploying to OpenShift</h4>
<div class="paragraph">
<p>The following section details on how to deploy the Iteration II to OpenShift.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure that all <a href="#itr2-pre-req">Pre-Requisite</a> are done before starting deployment.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="itr2-rabbitmq">RabbitMQ</h5>
<div class="sect5">
<h6 id="itr2-rabbitmq-local">Local Deployment</h6>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/extras/rabbitmq</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw -Dfabric8.mode=kubernetes clean fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="itr2-rabbitmq-cloud">External Cloud Deployment</h6>
<div class="paragraph">
<p>Sometimes you might have access to docker socket typical case when deploying to external cloud, in those cases you can run the following set of commands,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw clean fabric8:resource
oc apply -f target/classes/META-INF/fabric8/openshift.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will take some time to get it running as the deployment needs to download the <code>rabbitmq</code> docker image</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="itr2-zipkin-server">Zipkin Server</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/zipkin-server</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="zuul">Zuul</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/zuul</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="itr2-ingredients">Ingredients</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/ingredients</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="itr2-reporting">Reporting</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/reporting</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="itr2-brewing">Brewing</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/brewing</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="itr2-presenting">Presenting</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/presenting</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw fabric8:deploy</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="itr2-acceptance-testing">4.4. Acceptance Testing</h3>
<div class="paragraph">
<p>The <strong>$PROJECT_HOME/acceptance-tests</strong> holds the test cases for testing the application.  To perform
we need to have have some ports forwarded from Kubernetes/OpenShift to localhost(where you build the application)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">oc port-forward zipkin-1-06wmt 9411:8080 <i class="conum" data-value="1"></i><b>(1)</b>
oc port-forward presenting-1-wzhfn 9991:8080 <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>forward port 8080 from Zipkin pod to listen on localhost:9411</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>forward port 8080 from Presenting pod to listen on localhost:9991</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please update the pod names based on your local deployment
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To run acceptance testing, execute following command from $PROJECT_HOME,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh"> ./mvnw clean test</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="itr2-deprecated-modules">4.5. Deprecated Modules</h3>
<div class="paragraph">
<p>As part of Iteration-II the following modules have been deprecated,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eureka</p>
</li>
<li>
<p>Config Server</p>
</li>
<li>
<p>common-zipkin</p>
</li>
<li>
<p>common-zipkin-old</p>
</li>
<li>
<p>zookeeper</p>
</li>
<li>
<p>docker</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="iteration-3">5. Iteration III</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Iteration III is more of optimizing the <a href="#iteration-2">Iteration II</a> on OpenShift. This iteration has fair bit of code change that is required when porting the application to
use</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://activemq.apache.org/artemis/">Apache Artemis</a> in place of RabbitMQ</p>
</li>
<li>
<p><a href="http://opentracing.io/">OpenTracing</a> for tracing and  <a href="https://uber.github.io/jaeger/">Jaeger</a> in place of Zipkin</p>
</li>
<li>
<p>Native Kubernetes based Load Balancing instead of Ribbon</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This iteration has obsoleted many modules/projects from source tree, refer to the <a href="#itr3-deprecated-modules">deprecate</a> section for more details.</p>
</div>
<div class="sect2">
<h3 id="itr3-application-setup">5.1. Setup</h3>
<div class="sect3">
<h4 id="itr3-clone-source">5.1.1. Clone</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">git clone -b iteration-3 https://github.com/redhat-developer-demos/brewery.git</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Through out this document we will call the directory where the project was cloned as <em>$PROJECT_HOME</em></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="itr3-pre-req">5.2. Pre-Requisite</h3>
<div class="sect3">
<h4 id="itr3-pre-req-general">5.2.1. General</h4>
<div class="paragraph">
<p>The spring-cloud-kubernetes library used in the project requires the <code>default</code> service account to have view permissions, to enable that we execute the following command,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">oc policy add-role-to-user view -z default -n $(oc project -q)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="itr3-deployable-apps">5.3. Deploy Applications</h3>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Application List</caption>
<colgroup>
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 62.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top"></th>
<th class="tableblock halign-left valign-top">Application</th>
<th class="tableblock halign-left valign-top">Folder</th>
<th class="tableblock halign-left valign-top">Remarks</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#itr3-artemis">Apache Artemis</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/extras/apache-artemis</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message Broker - <a href="https://activemq.apache.org/artemis/" class="bare">https://activemq.apache.org/artemis/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">common</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/common</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common shared library, the shared libraries dependencies are updated to leverage RHOAR 1.5.7 BOM</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="red"><strong>X</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="red">common-zipkin-stream</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="red"><strong>$PROJECT_HOME</strong>/common-zipkin-stream</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since this iteration has moved all the tracing Components to  <a href="http://opentracing.io/">OpenTracing</a>, this module is deprecated/obsolete as no Sleuth
Stream will be used, instead the project will use <a href="https://github.com/search?q=org%3Aopentracing-contrib+java">Open Tracing Java modules</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="red"><strong>X</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="red">eureka</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="red"><strong>$PROJECT_HOME</strong>/eureka</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application will use <a href="https://kubernetes.io/docs/concepts/services-networking/service/">Kubernetes Services</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="red"><strong>X</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="red">config-server</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="red"><strong>$PROJECT_HOME</strong>/config-server</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application will use <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configmap/">Kubernetes ConfigMaps</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="red"><strong>X</strong></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="red">zipkin-server</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="red"><strong>$PROJECT_HOME</strong>/zipkin-server</span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://zipkin.io/">Distributed Tracing system</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#jaeger">[jaeger]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaeger already provides OpenShift manifests to deploy the same in OpenShift</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://uber.github.io/jaeger/">Jaeger</a>, a high performing OpenTracing based implementation of Distributed Tracing</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#zuul">Zuul</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/zuul</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/Netflix/zuul/wiki">Java based Proxy</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ingredients">Ingredients</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/ingredients</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#reporting">Reporting</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/reporting</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#brewing">Brewing</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/brewing</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="icon"><i class="fa fa-check fa-color: green"></i></span></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#presenting">Presenting</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>$PROJECT_HOME</strong>/presenting</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="itr3-build-app">5.3.1. Building</h4>
<div class="paragraph">
<p>The Iteration II of the brewery application has migrated all the projects to <a href="http://maven.apache.org/">Apache Maven</a> based build,
to build the application run the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw -N install <i class="conum" data-value="1"></i><b>(1)</b>
./mvnw clean install <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This will install the brewery parent pom in local maven repository</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This will build the applications, if the minishift or OpenShift cluster is running, this will trigger <code>s2i</code> builds
of the respective application as well</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="itr3-deploy-to-openshift">5.3.2. Deploying to OpenShift</h4>
<div class="paragraph">
<p>As part of this lift and shift of existing application, to make it work as-is, there is certain order of applicaiton deployment might be required.  The following section
explains the deployment of the application in the same order as expected  ( you can expriment with it if you like :) )</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure that all <a href="#itr3-pre-req">Pre-Requisite</a> are done before starting deployment.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="itr3-artemis">Apache Artemis</h5>
<div class="paragraph">
<p>Starting this iteration, the application will be using <a href="https://activemq.apache.org/artemis/">Apache Artemis</a> as message broker in place of RabbitMQ, the following sections details on deploying
Apache Artemis on OpenShift</p>
</div>
<div class="sect5">
<h6 id="itr3-apache-artemis-local">Local Deployment</h6>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/extras/apache-artemis</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw -Dfabric8.mode=kubernetes clean fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="itr3-apache-artemis-cloud">External Cloud Deployment</h6>
<div class="paragraph">
<p>Sometimes you might have access to docker socket typical case when deploying to external cloud, in those cases you can run the following set of commands,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw clean fabric8:resource
oc apply -f target/classes/META-INF/fabric8/openshift.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will take some time to get it running as the deployment needs to download the <code>apache-artemis</code> docker image</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="itr3-jaeger">Jaeger Server</h5>
<div class="paragraph">
<p>The Jaeger distribution provides the OpenShift deployment manifests to deploy Jaeger, as part of this demo
the <a href="https://github.com/jaegertracing/jaeger-openshift">all-in-one</a> deployment will be used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">cd $PROJECT_HOME/extras/jaeger
oc process -f jaeger-all-in-one-template.yml  | oc create -f -</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Please use the template from sources for all-in-deployment of Jaeger, any version above 0.8.0 is not able to display order traces as expected</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="zuul">Zuul</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/zuul</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="itr3-ingredients">Ingredients</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/ingredients</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="itr3-reporting">Reporting</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/reporting</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="itr3-brewing">Brewing</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/brewing</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw fabric8:deploy</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="itr3-presenting">Presenting</h5>
<div class="paragraph">
<p>Go to the directory  <strong>$PROJECT_HOME/presenting</strong>, and execute the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">./mvnw fabric8:deploy</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="itr3-open-issues">5.4. Open Issues</h3>
<div class="sect3">
<h4 id="itr3-tracing-traces">5.4.1. Tracing</h4>
<div class="paragraph">
<p>The traces generated by OpenTracing right now has order traces broken because right now there is no instrumentation for Spring Streams.  The instrumentation
is under development.</p>
</div>
</div>
<div class="sect3">
<h4 id="itr3-acceptance-testing">5.4.2. Acceptance Testing</h4>
<div class="paragraph">
<p>As this iteration has lot of module updates and replacements, the old acceptance tests does not hold good. The automated Arquillain based automated tests development
is in progress, this section will be updated with needed details once its in place.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="itr3-deprecated-modules">5.5. Deprecated Modules</h3>
<div class="paragraph">
<p>As part of Iteration-III the following modules have been deprecated,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eureka</p>
</li>
<li>
<p>Config Server</p>
</li>
<li>
<p>common-zipkin</p>
</li>
<li>
<p>common-zipkin-old</p>
</li>
<li>
<p>common-zipkin-stream</p>
</li>
<li>
<p>zipkin-server</p>
</li>
<li>
<p>zookeeper</p>
</li>
<li>
<p>docker</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources">6. Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="documentation">6.1. Documentation</h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://books.sonatype.com/mvnref-book/reference/resource-filtering-sect-properties.html">Maven Properties</a></p>
</li>
<li>
<p><a href="https://kubernetes.io">Kubernetes</a></p>
</li>
<li>
<p><a href="https://www.openshift.com">Openshift</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="res-tools">6.2. Tools</h3>
<div class="paragraph">
<p>There are two main tools that is always used with Spring Boot on OpenShift</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://developers.redhat.com/products/cdk/download/">RedHat Container Development Kit</a></p>
</li>
<li>
<p><a href="https://maven.fabric8.io">fabric8 maven plugin</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also find related tools and downloads from <a href="https://developers.redhat.com" class="bare">https://developers.redhat.com</a></p>
</div>
<div class="paragraph">
<p>This page lists some commonly used commands, tips/tricks and some trouble shooting tips
around these tools.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This is not meant to replace original setup guide, please refer to the original setup guides
for detailed setup of these tools.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="minishift">6.2.1. Minishift</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">oc login --server &lt;your openshift master server url&gt; -u developer</code></pre>
</div>
</div>
<div class="paragraph">
<p>Logging into OpenShift from cli using the user developer and the default password is developer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">eval $(minishift oc-env)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sets the right path to the OpenShift cli</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">minishift console</code></pre>
</div>
</div>
<div class="paragraph">
<p>Opens the OpenShift web console in the default browser</p>
</div>
</div>
<div class="sect3">
<h4 id="fabric8-maven-plugin">6.2.2. fabric8 maven plugin</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">eval $(minishift docker-env)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is very important command that you need to run before the first maven build, as this allows setting
some important docker variables</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">mvn io.fabric8:fabric8-maven-plugin:3.5.30:setup</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sets up the fabric8 maven plugin in the current maven project.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the above code 3.5.30 is used as version, please update to version that suits your needs
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">mvn fabric8:deploy</code></pre>
</div>
</div>
<div class="paragraph">
<p>Deploys the current maven project into OpenShift</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">mvn fabric8:undeploy</code></pre>
</div>
</div>
<div class="paragraph">
<p>UnDeploys the current maven project from OpenShift</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">mvn fabric8:debug</code></pre>
</div>
</div>
<div class="paragraph">
<p>Setups up port forward to debug the current OpenShift project</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sh">mvn fabric8:run</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quick deploy the current maven project to OpenShift, runs in foreground
and undeploys once CTRL + C is used to terminate current process in foreground.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="res-blogs">6.3. Blogs</h3>
<div class="paragraph">
<p><a href="http://bit.ly/spring-boot-on-k8s">Getting started with Spring Boot on OpenShift</a></p>
</div>
<div class="paragraph">
<p><a href="http://bit.ly/springboot-oauth2-keycloak">Spring Boot and OAuth2 with Keycloak - RHD Blog</a></p>
</div>
<div class="paragraph">
<p><a href="http://bit.ly/configsprintboot-k8s-part-1">Configuring Spring Boot Application on Kubernetes - RHD Blog</a></p>
</div>
<div class="paragraph">
<p><a href="http://bit.ly/spring-boot-config-k8s-part-2">Configuring Spring Boot on Kubernetes with ConfigMap - RHD Blog</a></p>
</div>
<div class="paragraph">
<p><a href="http://bit.ly/spring-boot-config-k8s-part-3">Configuring Spring Boot on Kubernetes with Secrets - RHD Blog</a></p>
</div>
</div>
<div class="sect2">
<h3 id="res-demos">6.4. Demos</h3>
<div class="paragraph">
<p>Spring Boot on OpenShift 101 <a href="https://github.com/redhat-developer-demos/springboot-on-openshift">Quickstart SprigBoot on OpenShift</a></p>
</div>
<div class="paragraph">
<p>Step by Step approach to make an existing CloudFoundry ready Spring Boot application and its related workloads
to OpenShift <a href="http://bit.ly/green-cloud-demo">Green Cloud Demo</a></p>
</div>
<div class="paragraph">
<p>How to do a stateful Canary deployment using Spring Boot and Infnispan <a href="http://bit.ly/green-cloud-demo-sources">Popular Movie Store</a></p>
</div>
<div class="paragraph">
<p>How to do integration Test of Spring Boot Application on OpenShift <a href="https://github.com/redhat-developer-demos/spring-boot-arq-demo">Spring Boot Integration Test on OpenShift</a></p>
</div>
<div class="paragraph">
<p>Using Kubernetes ConfigMaps with Spring Boot <a href="https://github.com/redhat-developer-demos/spring-boot-configmaps-demo">Configure Kubernetes ConfigMaps with Spring Boot</a></p>
</div>
<div class="paragraph">
<p>Using Kubernetes Secrets with Spring Boot <a href="https://github.com/redhat-developer-demos/spring-boot-secrets-demo">Configure Kubernetes Secrets with Spring Boot</a></p>
</div>
</div>
<div class="sect2">
<h3 id="res-videos">6.5. Videos</h3>
<div class="paragraph">
<p>Quick Start Spring Boot on OpenShift</p>
</div>
<div class="videoblock">
<div class="content">
<iframe src="https://www.youtube.com/embed/nskZMK40NY4?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>Debug Spring Boot Application on OpenShift</p>
</div>
<div class="videoblock">
<div class="content">
<iframe src="https://www.youtube.com/embed/4oOfSdEIyxU?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version {version}<br>
Last updated 2017-10-30 16:00:10 UTC
</div>
</div>
</body>
</html>